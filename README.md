# Elevator
模拟高层建筑电梯活动，乘客乘梯活动。
## 1. 问题域概述
某国际展览中心共 40 层，设有载客电梯 10 部（用 E0~E9 标识） 。
## 2. 限定条件
  1）电梯的运行规则是： 
* E0、E1：可到达每层。 
* E2、E3：可到达 1、25~40 层。
* E4、E5：可到达 1~25 层。 
* E6、E7：可到达 1、2~40 层中的偶数层。 
* E8、E9：可到达 1~39 层中的奇数层。

  2） 每部电梯的最大乘员量均为 K 人（K 值可以根据仿真情况在 10-18 人之间确定） 。  
  3） 仿真开始时， 各电梯随机地处于其符合运行规则的任意一层， 为空梯。  
  4） 仿真开始后，有 N 人（0<N<1000）在 M 分钟（0<M<10）内随机地 到达该国际展览中心的 1 层，开始乘梯活动。  
  5） 每位乘客初次所要到达的楼层是随机的，令其在合适的电梯处等待电 梯到来。  
  6） 每位乘客乘坐合适的电梯到达指定楼层后，随机地停留 10－120 秒 后，再随机地去往另一楼层，依此类推，当每人乘坐过 L 次（每人的 L 值不同， 在产生乘客时随机地在 1-10 次之间确定）电梯后，第 L+1 次为下至底层并结 束乘梯行为。到所有乘客结束乘梯行为时，本次仿真结束。 
  7） 电梯运行速度为 S 秒/层（S 值可以根据仿真情况在 1-5 之间确定） ， 每人上下时间为 T 秒（T 值可以根据仿真情况在 2-10 之间确定） 。  
  8） 电梯运行的方向由先发出请求者决定，不允许后发出请求者改变电梯 的当前运行方向，除非是未被请求的空梯。  
  9） 当某层有乘客按下乘梯电钮时， 优先考虑离该层最近的、 满足条件 8 能够最快到达目标层的电梯。   
  10） 不允许电梯超员。 
## 3. 开发结果的行为特征
  1） 产生事件的周期为 1 秒，每次可产生 0 个或多个事件。  
  2） 各随机事件由互不相关的伪随机数发生器决定。  
  3） 设计一个易于理解的界面，动态显示各梯的载客与运行情况，动态显 示各楼层的人员停留情况与要求乘梯情况；动态显示从仿真开始到目前的时间。  
  4） 显示时用应表示出不同的乘客及其当前所要求去往的楼层。例如， 12-32 表示标识为 12 的乘客要求去往 32 层。  
  5） 统计各梯的运行与空闲时间；统计各人发出乘梯要求后的等待时间； 仿真结束后显示这些时间。  
  6） 参数 K、N、M、S、T 应从命令行输入。  

# 需要特别说明的类、方法和对象
### Elevator类
**方法：checkNextStep 用于确定接下来电梯运行状态**
这是电梯类中最关键的方法，是确定电梯如何运行的。  
基本思想：电梯查询优先级，该层同向请求->顺着当前方向楼层的请求->该层反向请求->与当前方向相反的楼层的请求。  
举个例子，如果电梯在10楼，方向是向上运行的，他会先检查10楼层有没有向上的请求，若有则电梯进入状态2开门；再检查10楼以上的楼层有没有请求，若有则电梯向上运行；之后检查10楼层有没有向下的请求，若有，则电梯向改变方向向下，并进入状态2开门；最后检查10楼以下的楼层有没有请求，若有则电梯向下运行。一旦满足其中一个条件，则执行，并不会到下一个条件了。  

**方法：run 以秒计数的动作**  
runState代表电梯状态：0是空闲；1运行；2停在某一层，上下客  
time2NextFloor 用于模拟到达楼层的时间，time2NextFloor=S秒/层，当time2NextFloor计数到0，意味着电梯到达某一层  
countTime2TakeOrLeave用于模拟乘客上下电梯的时间，当countTime2TakeOrLeave计数到time2TakeOrLeaveT上下电梯时间，则代表乘客真正上了电梯和下了电梯。  

### Passenger类
**方法：run 以秒计数的动作**
state 代表乘客状态。0在外面未进入,1在某楼层闲逛,2发起乘梯请求,3在电梯里,4完成所有乘梯活动  
在状态0、1时，当世界时间运行到设定的发起请求时间时，乘客发起请求。  

### World类
**WORLD_TIME：世界时间，即统一整个系统的时刻**
本次仿真未使用线程，用的是串行的方式来模拟并发的活动的。在第一版中用的是时间段的概念，最后导致要记录的变量众多，并且已发生混乱，逻辑简单但繁杂，在第二版中加入了系统时刻，使整个系统条理清晰。
